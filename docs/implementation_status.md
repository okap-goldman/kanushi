# 実装状況

## 機能間の依存関係
### データモデル依存
- 投稿機能
  - ユーザー情報（投稿者）
  - イベント情報（イベント関連投稿）
  - メディアストレージ（Box, YouTube, PodBean）
- インタラクション機能
  - 投稿情報（コメント、いいね、ハイライト）
  - ユーザー情報（実行者）
- 通知機能
  - 投稿情報（コメント、ハイライト通知）
  - イベント情報（イベント関連通知）
  - 商品情報（購入通知）
  - ユーザー情報（通知送受信者）

### ユーザーフロー依存
- 動画投稿 → Google認証（初回YouTube投稿時）
- タイムライン表示 → フォロー機能（ファミリー/ウォッチ）
- コメント/ハイライト → 通知機能
- イベント参加 → メッセージ機能（主催者への問い合わせ）
- ショップ購入 → メッセージ機能（出品者への問い合わせ）
- AIチャット → ユーザー管理（1日5回の制限）
- 発見機能 → ユーザー行動履歴（おすすめ投稿）

### 外部サービス依存
- メディア管理
  - 動画投稿 → YouTube API
  - 画像投稿 → Box API
  - 音声投稿 → PodBean API
- 決済機能
  - イベント参加 → Stripe API
  - ショップ購入 → Stripe API
- その他
  - 通知機能 → Firebase Cloud Messaging
  - AIチャット → DeepSeek R1 API

## ユーザー管理機能
### アカウント作成/ログイン
- [x] Google OAuth 2.0による認証
  - API: 仕様定義のみ（`/auth/google/login`, `/auth/google/refresh`）
  - データベーススキーマ: `USERS`テーブル定義のみ
  - UI: 実装済み
    - ログイン/サインアップ画面のGoogleログインボタン
    - 利用規約・プライバシーポリシーへの同意チェック
    - エラーメッセージ表示
  - 認証状態管理: 実装済み
    - AuthContextによるグローバルな状態管理
    - JWTトークンの管理（アクセストークン、リフレッシュトークン）
    - PrivateRouteによるルート保護
    - ローディング状態の表示

### プロフィール設定
- [ ] プロフィール情報の編集
  - API: 仕様定義のみ（`/users/{user_id}`のGET/PUT）
  - データベーススキーマ: `USERS`テーブル定義のみ
    - user_name
    - profile_icon_url
    - profile_audio_url
    - shop_link_url
    - is_shop_link
    - introduction
  - UI: 実装済み（プロフィール編集モーダル）

### 通知設定
- [ ] 通知設定の管理
  - API: 仕様定義のみ
  - データベーススキーマ: `NOTIFICATIONS`テーブル定義のみ
  - UI: 実装済み（通知設定画面）
  - FCM: 未実装

## フォロー機能
### ファミリー/ウォッチ
- [x] フォロー機能の基本実装
  - API: テスト実装完了（`/follows`, `/follows/{follow_id}`, `/users/{user_id}/followers`, `/users/{user_id}/following`）
    - POST /follows: ファミリー/ウォッチフォロー作成
    - DELETE /follows/{follow_id}: アンフォロー
    - GET /users/{user_id}/followers: フォロワー一覧取得
    - GET /users/{user_id}/following: フォロー一覧取得
  - データベーススキーマ: `FOLLOWS`テーブル定義のみ
    - follow_type (family/watch)
    - reason (ファミリーの場合の理由)
  - UI: 実装済み（フォローボタンとフォロー理由入力UI）

## タイムライン機能
### 投稿機能
- [ ] 動画投稿
  - API: 未実装
  - YouTube API連携: 未実装
  - UI: 未実装
- [ ] 画像投稿
  - API: 未実装
  - Box連携: 未実装
  - UI: 未実装
- [ ] 音声投稿
  - API: 未実装
  - PodBean API連携: 未実装
  - UI: 未実装
- [ ] テキスト投稿
  - API: 未実装
  - UI: 未実装

### インタラクション機能
- [ ] いいね機能
  - API: 未実装
  - データベーススキーマ: `LIKES`テーブル定義のみ
  - UI: 実装済み（いいねボタン、アニメーション）
- [ ] コメント機能
  - API: 未実装
  - データベーススキーマ: `COMMENTS`テーブル定義のみ
  - UI: 実装済み（コメント入力UI、コメント一覧表示）
- [ ] ハイライト機能
  - API: 未実装
  - データベーススキーマ: `HIGHLIGHTS`テーブル定義のみ
  - UI: 実装済み（ハイライトボタン、理由入力UI）

### ストーリー機能
- [ ] ストーリー投稿/表示
  - API: 仕様定義のみ（`/stories`）
  - データベーススキーマ: `STORIES`テーブル定義のみ
  - UI: 実装済み（ストーリー投稿UI、ストーリー表示UI）

## プロフィール機能
### プロフィール表示
- [ ] 基本情報表示
  - API: 仕様定義のみ（`/users/{user_id}`）
  - UI: 実装済み（プロフィールページのレイアウト）
- [ ] 投稿タブ表示
  - API: 仕様定義のみ
  - UI: 実装済み（メディア、音声、テキスト、ハイライト、イベントの各タブ）
- [ ] フォロワー数表示
  - API: 仕様定義のみ
  - UI: 実装済み（ファミリー/ウォッチ数の表示）

## 検索・AIチャット機能
### 検索機能
- [ ] キーワード検索
  - API仕様のみ定義済み
  - 実装未着手

### AIチャット
- [ ] DeepSeek R1連携
  - API仕様のみ定義済み
  - 実装未着手
- [ ] 質問制限機能
  - 仕様定義のみ
  - 実装未着手

## イベント機能
### イベント管理
- [ ] イベント登録/参加
  - API: 仕様定義のみ（`/events`, `/events/{event_id}`）
  - データベーススキーマ: `EVENTS`, `EVENTPARTICIPANTS`テーブル定義のみ
  - UI: 実装済み（イベント登録フォーム、参加フォーム）
- [ ] Stripe決済連携
  - API: 仕様定義のみ
  - データベーススキーマ: `TRANSACTIONS`テーブル定義のみ
  - UI: 実装済み（決済フロー）
  - Stripe連携: 未実装

## 発見（Discovery）機能
### 分析・表示機能
- [ ] ユーザー分析
  - API: 仕様定義のみ
  - UI: 未実装
- [ ] 地域活動表示
  - API: 仕様定義のみ
  - UI: 未実装
- [ ] おすすめ投稿
  - API: 仕様定義のみ
  - UI: 未実装

## ショップ機能
### 商品管理
- [ ] 商品一覧/詳細
  - API: 仕様定義のみ（ショップ関連エンドポイント）
  - データベーススキーマ: `SHOPS`, `PRODUCTS`テーブル定義のみ
  - UI: 実装済み（商品一覧、詳細表示）
- [ ] 取引管理
  - API: 仕様定義のみ
  - データベーススキーマ: `TRANSACTIONS`テーブル定義のみ
  - UI: 実装済み（取引履歴、管理画面）
  - Stripe連携: 未実装

## 管理者機能
### モデレーション機能
- [ ] ユーザー管理
  - API: 仕様定義のみ
  - UI: 未実装
- [ ] 投稿管理
  - API: 仕様定義のみ
  - UI: 未実装
- [ ] イベント管理
  - API: 仕様定義のみ
  - UI: 未実装
- [ ] ショップ管理
  - API: 仕様定義のみ
  - UI: 未実装
- [ ] AIチャットログ監視
  - API: 仕様定義のみ
  - UI: 未実装

## 非機能要件
### インフラ・セキュリティ
- [ ] CDN・キャッシュサーバー
  - Box連携: 未実装
  - YouTube連携: 未実装
  - PodBean連携: 未実装
- [ ] HTTPS通信
  - API: 仕様定義のみ（全エンドポイントでHTTPS必須）
  - 実装: 未実装
- [ ] 外部API認証管理
  - 各外部サービスとの認証連携: 未実装
- [ ] CSRF/XSS対策
  - セキュリティ対策: 未実装
- [ ] FCMプッシュ通知
  - Firebase Cloud Messaging: 未実装
